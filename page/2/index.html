<!-- This goes in the document HEAD so IE7 and IE8 don't cry -->
<!--[if lt IE 9]>
<style type="text/css">
  table.gradienttable th {
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#d5e3e4', endColorstr='#b3c8cc',GradientType=0 );
    position: relative;
    z-index: -1;
  }
  table.gradienttable td {
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ebecda', endColorstr='#ceceb7',GradientType=0 );
    position: relative;
    z-index: -1;
  }
</style>
<![endif]-->


<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7" prefix="og: http://ogp.me/ns#"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8" prefix="og: http://ogp.me/ns#"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en" prefix="og: http://ogp.me/ns#"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Meta Data Science</title>
  <meta name="author" content="Massoud Seifi">

  
  <meta name="description" content="Introduction R is an open source language and environment for statistical computing and graphics. It’s an implementation of the S language which was &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://metadatascience.com/./page/2/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Meta Data Science" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Oswald:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Avenir:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<meta property="og:title" content="Meta Data Science By Massoud Seifi, Ph.D. Data Scientist" />
<meta property="og:image" content="/images/metadatascience.gif" />
<link href="/stylesheets/data-table.css" media="screen, projection" rel="stylesheet" type="text/css" />
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      jax: ["input/TeX", "output/HTML-CSS"],
      tex2jax: {
        inlineMath: [ ['$', '$'], ["\\(", "\\)"] ],
        displayMath: [ ['$$', '$$'], ["\\[", "\\]"] ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
      //,
      //displayAlign: "left",
      //displayIndent: "2em"
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML" type="text/javascript"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-38669216-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


  <!-- Start of StatCounter Code for Default Guide -->
<script type="text/javascript">
	var sc_project=8892392; 
	var sc_invisible=1; 
	var sc_security="3020fdf3"; 
	var scJsHost = (("https:" == document.location.protocol) ? "https://secure." : "http://www.");
	document.write("<sc"+"ript type='text/javascript' src='" + scJsHost+ "statcounter.com/counter/counter.js'></"+"script>");
</script>
<noscript>
	<div class="statcounter">
		<a title="web analytics" href="http://statcounter.com/" target="_blank">
			<img class="statcounter" src="http://c.statcounter.com/8892392/0/3020fdf3/1/" alt="web analytics">
		</a>
	</div>
</noscript>
<!-- End of StatCounter Code for Default Guide -->
</head>


<body   >
  <header role="banner"><hgroup>
  <h1><a href="/"><img src='/images/logo.png' alt='logo' height="71" width="85"/>   Meta Data Science</a></h1>
  
    <h2><span style="font-family:Oswald;">By Massoud Seifi, Ph.D. Data Scientist</span></h2>
  

</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:metadatascience.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/archives">Archives</a></li>
  <li><a href="/publications">Publications</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2013/07/03/plotting-the-frequency-distribution-using-r/">Plotting the Frequency Distribution Using R</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-07-03T12:22:00-07:00" pubdate data-updated="true">Jul 3<span>rd</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h3 id="introduction">Introduction</h3>

<p><a href="http://www.r-project.org/">R</a> is an open source language and environment for statistical computing and graphics. 
It’s an implementation of the <a href="http://en.wikipedia.org/wiki/S_(programming_language)">S language</a> which was developed at Bell Laboratories by John Chambers and colleagues.
R provides a wide variety of statistical and graphical techniques, including linear and nonlinear modeling, classical statistical tests, time-series analysis, classification, clustering, and others. 
It is also an interpreted language and can be accessed through a command-line interpreter: For example, if a user types “2+2” at the R command prompt and press enter, the computer replies with “4”.
R is freely available under the GNU General Public License.</p>

<h3 id="plotting-the-frequency-distribution">Plotting The Frequency Distribution</h3>

<h4 id="frequency-distribution">Frequency distribution</h4>

<p>A frequency distribution shows the number of occurrences in each category of a categorical variable. 
For example, in a sample set of users with their favourite colors, we can find out how many users like a specific color.</p>

<h4 id="data-set">Data set</h4>

<p>Suppose a data set of 30 records including user ID, favorite color and gender:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>Sample Set  (sample.csv)</span> <a href="/downloads/code/sample.csv">download</a></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
</pre></td><td class="code"><pre><code class="text"><span class="line">ID,Color,Gender
</span><span class="line">792141B,Blue,Male
</span><span class="line">795156A,Blue,Male
</span><span class="line">795156B,Blue,Male
</span><span class="line">795156C,Blue,Male
</span><span class="line">795156E,Blue,Male
</span><span class="line">795156G,Blue,Female
</span><span class="line">795156I,Blue,Male
</span><span class="line">795156J,White,Male
</span><span class="line">795156M,Red,Male
</span><span class="line">795156N,Blue,Male
</span><span class="line">795156O,Green,Male
</span><span class="line">795156P,Red,Male
</span><span class="line">795156Q,Blue,Male
</span><span class="line">795156S,White,Male
</span><span class="line">795156T,Blue,Male
</span><span class="line">795156W,Red,Female
</span><span class="line">800731A,Red,Male
</span><span class="line">800731C,Blue,Male
</span><span class="line">800731E,Blue,Male
</span><span class="line">800731F,Blue,Female
</span><span class="line">800731G,Red,Male
</span><span class="line">800731I,Blue,Female
</span><span class="line">800731K,Blue,Female
</span><span class="line">800731M,Blue,Male
</span><span class="line">800731N,Blue,Female
</span><span class="line">800731O,Blue,Female
</span><span class="line">800731Q,Blue,Male
</span><span class="line">800731W,Blue,Male
</span><span class="line">800731X,Red,Male
</span><span class="line">800731Y,Red,Male
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h4 id="reading-the-csv-file">Reading the csv file</h4>

<p>Let’s start with reading the csv file:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="text"><span class="line">data &lt;- read.csv(file = &#39;sample.csv&#39;, header = TRUE, sep = &#39;,&#39;)
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>The first argument which is mandatory is the name of file. The second argument indicates whether or not the first row is a set of labels and the third argument indicates the delimiter. The above command will read in the csv file and assign it to a variable called “data”.</p>

<p>You can use the following command to see the list of column names:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="text"><span class="line">names(data)
</span></code></pre></td></tr></table></div></figure></notextile></div>
<p>which results:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="text"><span class="line">[1] &quot;ID&quot;     &quot;Color&quot;  &quot;Gender&quot;
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Or you can use following command to see a summary of the data:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="text"><span class="line">summary(data)
</span></code></pre></td></tr></table></div></figure></notextile></div>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="text"><span class="line">   ID       Color       Gender
</span><span class="line"> 792141B: 1   Blue :20   Female: 7
</span><span class="line"> 795156A: 1   Green: 1   Male  :23
</span><span class="line"> 795156B: 1   Red  : 7
</span><span class="line"> 795156C: 1   White: 2
</span><span class="line"> 795156E: 1
</span><span class="line"> 795156G: 1
</span><span class="line"> (Other):24
</span></code></pre></td></tr></table></div></figure></notextile></div>
<p>As you see, the number of occurrences of each color is shown in the summary. </p>

<h4 id="table-function">Table function</h4>

<p><em>table()</em>  uses the cross-classifying factors to build a contingency table of the counts at each combination of factor levels.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="text"><span class="line">table(data$Color)
</span></code></pre></td></tr></table></div></figure></notextile></div>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="text"><span class="line"> Blue Green   Red White
</span><span class="line">   20     1     7     2
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h4 id="plotting">Plotting</h4>

<p>Now we can plot it easily using the <em>barplot</em> command:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="text"><span class="line">barplot(table(data$Color))
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h4 id="save-the-plot-as-an-image">Save the plot as an image</h4>

<p>I can see the plot on my machine, but to put it here on my weblog, I have to save it as an image:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="text"><span class="line">dev.copy(png, &#39;freq.png&#39;)
</span><span class="line">dev.off()
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Here you go…</p>

<p><img class="center" src="/images/freq.png" width="380" height="380" /></p>

<h4 id="factor">Factor</h4>

<p>The <em>factor</em> function is used to create a factor (or category) from a vector. </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="text"><span class="line">factor(data$Color)
</span></code></pre></td></tr></table></div></figure></notextile></div>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="text"><span class="line">[1] Blue  Blue  Blue  Blue  Blue  Blue  Blue  White Red   Blue  Green Red
</span><span class="line">[13] Blue  White Blue  Red   Red   Blue  Blue  Blue  Red   Blue  Blue  Blue
</span><span class="line">[25] Blue  Blue  Blue  Blue  Red   Red
</span><span class="line">Levels: Blue Green Red White
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Levels is a unique set of values in the vector.</p>

<p>Now, suppose that “Yellow” was also an option for the users but nobody has chosen it as the favourite color. 
We can use the <em>factor</em> command to customize the categories:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="text"><span class="line">factor(data$Color, levels = c(&#39;Blue&#39;, &#39;Green&#39;, &#39;Yellow&#39;, &#39;Red&#39;, &#39;White&#39;))
</span></code></pre></td></tr></table></div></figure></notextile></div>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="text"><span class="line"> [1] Blue  Blue  Blue  Blue  Blue  Blue  Blue  White Red   Blue  Green Red
</span><span class="line">[13] Blue  White Blue  Red   Red   Blue  Blue  Blue  Red   Blue  Blue  Blue
</span><span class="line">[25] Blue  Blue  Blue  Blue  Red   Red
</span><span class="line">Levels: Blue Green Yellow Red White
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Now, we can see Yellow in the frequency distribution:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="text"><span class="line">table(factor(data$Color, levels = c(&#39;Blue&#39;,&#39;Green&#39;,&#39;Yellow&#39;,&#39;Red&#39;,&#39;White&#39;)))
</span></code></pre></td></tr></table></div></figure></notextile></div>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="text"><span class="line">  Blue  Green Yellow    Red  White
</span><span class="line">    20      1      0      7      2
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>And we can see it on the plot:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="text"><span class="line">barplot(table(factor(data$Color, levels = c(&#39;Blue&#39;, &#39;Green&#39;, &#39;Yellow&#39;, &#39;Red&#39;, &#39;White&#39;))))
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p><img class="center" src="/images/freq1.png" width="380" height="380" /></p>

<p>if you want to see the percentages instead of the values, you can try this:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="text"><span class="line">t &lt;- table(factor(data$Color, levels = c(&#39;Blue&#39;, &#39;Green&#39;, &#39;Yellow&#39;, &#39;Red&#39;, &#39;White&#39;)))
</span><span class="line">barplot(t / sum(t))
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p><img class="center" src="/images/freq2.png" width="380" height="380" /></p>

<h4 id="filtering">Filtering</h4>

<p>Now, let’s imagine that we want to plot the frequency distribution of favourite colors for men and women separately. 
The following commands create two subsets of data by filtering the gender and store it to two different variables (Don’t forget the comma!):</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="text"><span class="line">men &lt;- data[data$Gender == &#39;Male&#39;,]
</span><span class="line">
</span><span class="line">women &lt;- data[data$Gender == &#39;Female&#39;,]
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>now we can plot the distributions seperately:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="text"><span class="line">l &lt;- c(&#39;Blue&#39;, &#39;Green&#39;, &#39;Yellow&#39;, &#39;Red&#39;, &#39;White&#39;)
</span><span class="line">
</span><span class="line">barplot(table(factor(men$Color, levels = l, main = &#39;Men&#39;)
</span><span class="line">
</span><span class="line">barplot(table(factor(women$Color, levels = l, main = &#39;Women&#39;)
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p><img src="/images/freq_men.png" width="380" height="380" /><img src="/images/freq_women.png" width="380" height="380" /></p>

<h4 id="colors-and-labels">Colors and Labels</h4>

<p>Do you like colors and labels?! Here you go…</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="text"><span class="line">l &lt;- c(&#39;Blue&#39;,&#39;Green&#39;,&#39;Yellow&#39;,&#39;Red&#39;,&#39;White&#39;)
</span><span class="line">
</span><span class="line">barplot(table(factor(data$Color, levels = l)) , col = c(&#39;blue&#39;, &#39;green&#39;, &#39;yellow&#39;, &#39;red&#39;, &#39;white&#39;), xlab = &#39;Favourite Color&#39;, ylab = &#39;Number Of Users&#39;)
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p><img class="center" src="/images/freq3.png" width="480" height="480" /></p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2013/03/14/lookup-table-for-inferring-facebook-account-creation-date-from-facebook-user-id/">Lookup Table for Inferring Facebook Account Creation Date From Facebook User ID</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-14T12:49:00-07:00" pubdate data-updated="true">Mar 14<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In my <a href="http://metadatascience.com/2013/03/11/inferring-facebook-account-creation-date-from-facebook-user-id/">previous post</a>, I explained how we can estimate the account creation date of Facebook accounts that have a 15 digit UID without having to call the Facebook API and just based on the user’s Facebook UID. </p>

<p>Table below shows the correlation between Facebook UID and Facebook Account Creation Date for the sample set that I analysed.
The table is represented in <a href="http://en.wikipedia.org/wiki/Comma-separated_values">CSV</a> format as follows:</p>

<p><em>Facebook UID, Account Creation Date(timestamp), Account Creation Date(date)</em>.</p>

<p><strong>Note #1:</strong> To respect the users privacy I hided the last 5 digits of UIDs. You may replace ‘x’ by ‘0’ and it should not cause any problem.</p>

<p><strong>Note #2:</strong> For a more accurate result, this table should get updated.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>Correlation between Facebook UID and Facebook Account Creation Date  (fbid_accountage.csv)</span> <a href="/downloads/code/fbid_accountage.csv">download</a></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
</pre></td><td class="code"><pre><code class="text"><span class="line">1000053132xxxxx,1361330314,2013-02-19
</span><span class="line">1000049732xxxxx,1357606484,2013-01-07
</span><span class="line">1000047422xxxxx,1354021840,2012-11-27
</span><span class="line">1000047355xxxxx,1353417806,2012-11-20
</span><span class="line">1000046843xxxxx,1352662415,2012-11-11
</span><span class="line">1000046015xxxxx,1350999158,2012-10-23
</span><span class="line">1000035523xxxxx,1349467776,2012-10-05
</span><span class="line">1000040785xxxxx,1343717040,2012-07-30
</span><span class="line">1000041143xxxxx,1342928040,2012-07-21
</span><span class="line">1000038945xxxxx,1338526722,2012-05-31
</span><span class="line">1000036032xxxxx,1331873652,2012-03-15
</span><span class="line">1000031133xxxxx,1320583505,2011-11-06
</span><span class="line">1000031024xxxxx,1320464096,2011-11-04
</span><span class="line">1000029834xxxxx,1318571069,2011-10-13
</span><span class="line">1000029345xxxxx,1315974235,2011-09-13
</span><span class="line">1000026042xxxxx,1309652553,2011-07-02
</span><span class="line">1000023280xxxxx,1306728328,2011-05-29
</span><span class="line">1000024582xxxxx,1304995827,2011-05-09
</span><span class="line">1000023732xxxxx,1303537065,2011-04-22
</span><span class="line">1000022413xxxxx,1302326877,2011-04-08
</span><span class="line">1000022328xxxxx,1300810582,2011-03-22
</span><span class="line">1000019352xxxxx,1295628516,2011-01-21
</span><span class="line">1000014241xxxxx,1285972221,2010-10-01
</span><span class="line">1000013861xxxxx,1281882953,2010-08-15
</span><span class="line">1000014436xxxxx,1280116994,2010-07-25
</span><span class="line">1000012117xxxxx,1276055448,2010-06-08
</span><span class="line">1000010697xxxxx,1274090432,2010-05-17
</span><span class="line">1000010425xxxxx,1272438522,2010-04-28
</span><span class="line">1000008600xxxxx,1268201411,2010-03-09
</span><span class="line">1000008113xxxxx,1267667333,2010-03-03
</span><span class="line">1000006286xxxxx,1266618961,2010-02-19
</span><span class="line">1000006189xxxxx,1263726284,2010-01-17
</span><span class="line">1000006449xxxxx,1262406605,2010-01-01
</span><span class="line">1000003298xxxxx,1261112448,2009-12-17
</span><span class="line">1000005651xxxxx,1259793952,2009-12-02
</span><span class="line">1000005426xxxxx,1259605238,2009-11-30
</span><span class="line">1000005072xxxxx,1258400669,2009-11-16
</span><span class="line">1000004668xxxxx,1257502719,2009-11-06
</span><span class="line">1000002286xxxxx,1252567838,2009-09-10
</span><span class="line">1000001160xxxxx,1250562107,2009-08-17
</span><span class="line">1000001568xxxxx,1250382196,2009-08-15
</span></code></pre></td></tr></table></div></figure></notextile></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2013/03/11/inferring-facebook-account-creation-date-from-facebook-user-id/">Inferring Facebook Account Creation Date From Facebook User ID</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-11T11:27:00-07:00" pubdate data-updated="true">Mar 11<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Calling the Facebook API is a (relatively) slow operation; especially if you have to call it multiple times. 
So, when possible, it is a good idea to get the information you need, without making API calls.</p>

<p>Here I show you how to figure out the <em>creation date</em> of a Facebook account without having to call the Facebook API, just based on the user’s Facebook UID.</p>

<h3 id="the-bad-way-to-do-it">The Bad Way To Do It</h3>

<p>As I explained in <a href="http://metadatascience.com/2013/03/05/how-to-estimate-the-facebook-account-creation-date/">my previous post</a>,
it is possible to estimate the Facebook account creation date by retrieving the date of user’s oldest post. 
This method has a couple of draw backs:</p>

<p><strong>Draw Back #1</strong>: <img class="right" src="/images/screenshot_read_stream.png" width="356" height="262" title="read_stream" /> You must have <em>‘read_stream’</em> permission which is an extended Facebook permission to read the user post stream. From a user’s point of view, this sounds scarier than the other basic permissions you probably ask for.</p>

<p><strong>Draw Back #2</strong>: As an extended permission it triggers a second permission screen that dramatically increases the <a href="http://en.wikipedia.org/wiki/User_experience">UX</a> friction for the users.  (You want <em>low</em> friction UX.)</p>

<p><strong>Draw Back #3</strong>: The overhead of walking the entire post stream to determine age is very costly for the simple piece of information we synthesize. (You have to call the Facebook API over and over and over and over … again, since the post stream is paginated. I.e., this is at best an O(n) operation, where “n” relates to the user’s activity on Facebook.)</p>

<h3 id="my-search-for-a-better-way">My Search For A Better Way</h3>

<p>To overcome these issues I tried an to find an alternative, asynchronous approach.
I was wondering if it is possible to estimate a Facebook account creation date by looking at Facebook User ID.
I couldn’t find any official documentation on how Facebook generates a new Facebook user ID and how they are accomplishing that in a scalable fashion.
One answer I could find was from <em>Jack Lindamood, Software Engineer at Facebook 2008-2012</em> which I found <a href="http://www.quora.com/Facebook-1/How-do-Facebook-use-incremented-IDs-for-both-users-and-Pages">here</a>:</p>

<blockquote>
  <p>‘Lots’ of MySQL DBs. Each with their own unique number.  Also, each has an autoincrement table. Then it’s just some math on the autoincrement value + unique_number * some_cap_per_db (it’s a bit more complicated due to special cases, but that’s pretty much how it works). </p>
</blockquote>

<p>Another explanation was from <em>Justin Mitchell, former engineering manager</em>. He explains <a href="http://www.quora.com/Facebook-Company-History/What-is-the-history-of-Facebooks-user-ID-numbering-system">here</a> the history of Facebook user ID numbering system:</p>

<blockquote>
  <p>Facebook’s user ID schema reflects the history of the site as it transitioned from a single-server single-school operation to 400 million users.  User ID assignment has gone through several phases, notably:</p>

  <p>Harvard only.  Facebook (or thefacebook.com, as it was called back then) was opened up to Harvard running off a single box that had mysql and apache.  IDs were auto-incremented, starting at 4 (hi Zuck).</p>

  <p>Other schools.  Other schools were initially completely separate sites, operating on their own boxes.  IDs were still auto-increment per SQL box, but each server/school had a different prefix.  For instance, all Columbia IDs are between 100000-199999 and all Stanford IDs are between 200000-299999.  You can determine what school any early Facebook user attended based on his or her user ID.</p>

  <p>High schools. Someone must have figured out that this ID system didn’t scale very well, so Facebook changed its DB layout when high schools were introduced.  While all the college users maintained their current DB, high school users were randomly assigned to one of many many high school DBs.  These users IDs hash to the correct database, rather than simply being floor(ID / 100000).</p>

  <p>Open registration.  Facebook maintained a similar layout once open reg was launched, except the new databases weren’t signified as “high school.”</p>

  <p>64 bit.  Given Facebook’s growth rate, it was estimated that the entire world would be on the site by 2011, overflowing 32-bit space.  While we considered limiting the site to the first 4-billion people to register and lobbying governments to reduce the world’s population, the growth team pushed pretty hard to just increase the ID space to 64-bit.</p>
</blockquote>

<h3 id="using-facecbook-uids-for-predictions">Using Facecbook UIDs For Predictions</h3>

<p>So it seems that new Facebook IDs are 64 bits and contain 15 digits.
There is a <a href="https://developers.facebook.com/blog/post/45/">post</a> dating from October 2007 that mentions that Facebook had plans to do this long time ago but
according to this <a href="https://developers.facebook.com/blog/post/226/">post</a> from May, 2009, Facebook was going to release 64 bit user IDs back to 2009.</p>

<p>I studied the correlation between Facebook User ID and Account Creation Date for a <em>tiny sample set</em> of 77 Facebook accounts. 41 accounts of this sample set had a user ID containing 15 digits and for the rest the user ID has less than 15 digits. Figures below illustrate this correlation seperately for 64 bit UIDS (left) and old style UIDs (right).</p>

<p><img src="/images/fbid_age_15.png" width="390" height="390" title="uid==15" /><img src="/images/fbid_age_less.png" width="390" height="390" title="uid&lt;15" /></p>

<p>The graph on the left is for the new(er) Facebook UIDs. The graph on the right is for the old style Facebook IDs. You can see that the correlation between Facebook UID and its <em>creation date</em> is <strong>a lot</strong> better for the new(er) Facebook UIDs than the old ones.</p>

<p>Or in other words, as we observe, there is an interesting correlation between Facebook User ID and Account Creation Date for 64 bit user IDs (see figure on left).
Also in this sample set, old UIDs are more than 800 days old (see figure on right). The overlap between two graphs might be a period that Facebook was moving from old UIDs to 64 bit ones. </p>

<p><strong>Therefore as an alternative approach to estimate the Facebook account creation date, we may leverage the monotonically increasing property of 64 bit Facebook user IDs and create a table of bounds that would give us at least a quarterly estimate on the creation date for the account - an appropriate level of granularity for this purpose.</strong>
Taking this approach will reduce the number of permissions your application need and dramatically decrease the amount of processing time and remove a variable around the elapsed time to deliver a response.</p>

<p><span style="color:red"><b>Update (March 14, 2013):</b></span> 
See <a href="http://metadatascience.com/2013/03/14/lookup-table-for-inferring-facebook-account-creation-date-from-facebook-user-id/">here</a> 
to download the data set.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/./page/3/">&larr; Older</a>
    
    <a href="/archives">Blog Archives</a>
    
    <a class="next" href="/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>About Me</h1>
  <p>
  	I am a Data Scientist with a formal background in Computer Science and Mathematics (especially Graph Theory).
  	I have a high curiosity to make discoveries in the world of big data and a passion to find innovative solutions for complex challenges.</p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2015/09/22/add-unique-id-column-to-csv-files/">Add Unique ID column to CSV Files</a>
      </li>
    
      <li class="post">
        <a href="/2014/02/27/random-sampling-from-very-large-files/">Random sampling from very large files</a>
      </li>
    
      <li class="post">
        <a href="/2013/08/13/how-to-get-twitter-username-from-twitter-id/">How to get Twitter username from Twitter ID</a>
      </li>
    
      <li class="post">
        <a href="/2013/07/03/plotting-the-frequency-distribution-using-r/">Plotting the frequency distribution using R</a>
      </li>
    
      <li class="post">
        <a href="/2013/03/14/lookup-table-for-inferring-facebook-account-creation-date-from-facebook-user-id/">Lookup Table for Inferring Facebook Account Creation Date From Facebook User ID</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Latest Tweets</h1>
  <a class="twitter-timeline" href="https://twitter.com/AccessToken" data-widget-id="352835310855528450">Tweets by @AccessToken</a>
  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</section>


  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Massoud Seifi -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'metadatascience';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
